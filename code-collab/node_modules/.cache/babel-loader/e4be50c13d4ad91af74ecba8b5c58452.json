{"ast":null,"code":"import _defineProperty from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import Codemirror from'codemirror';import'codemirror/lib/codemirror.css';import'codemirror/theme/dracula.css';import'codemirror/mode/javascript/javascript.js';import'codemirror/addon/edit/closetag';import'codemirror/addon/edit/closebrackets';import ACTIONS from'../Actions';import axios from'axios';import Button from'react-bootstrap/esm/Button';import Dropdown from'react-bootstrap/Dropdown';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Editor=function Editor(_ref){var _ref4;var socketRef=_ref.socketRef,roomId=_ref.roomId,onCodeChange=_ref.onCodeChange;var editorRef=useRef(null);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),runcode=_useState2[0],setRuncode=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState('python'),_useState6=_slicedToArray(_useState5,2),language=_useState6[0],setLanguage=_useState6[1];var _useState7=useState('py'),_useState8=_slicedToArray(_useState7,2),extension=_useState8[0],setExtension=_useState8[1];//Compiling code\nvar run=function run(){axios.post(\"http://localhost:5000/\".concat(language),{runcode:runcode}).then(function(_ref2){var data=_ref2.data;setResult(data);});};useEffect(function(){function init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editorRef.current=Codemirror.fromTextArea(document.getElementById('realtimeEditor'),{mode:{name:'javascript',json:true},theme:'dracula',autoCloseTags:true,autoCloseBrackets:true,lineNumbers:true});editorRef.current.on('change',function(instance,changes){var origin=changes.origin;var code=instance.getValue();onCodeChange(code);setRuncode(code);if(origin!=='setValue'){socketRef.current.emit(ACTIONS.CODE_CHANGE,{roomId:roomId,code:code});}});case 2:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}init();},[]);useEffect(function(){if(socketRef.current){socketRef.current.on(ACTIONS.CODE_CHANGE,function(_ref3){var code=_ref3.code;if(code!==null){editorRef.current.setValue(code);}});}return function(){socketRef.current.off(ACTIONS.CODE_CHANGE);};},[socketRef.current]);//Settinf language and extension for various code languages\nvar python=function python(){setLanguage('python');setExtension('py');};var node=function node(){setLanguage('node');setExtension('js');};var c=function c(){setLanguage('c');setExtension('c');};var cpp=function cpp(){setLanguage('cpp');setExtension('cpp');};var java=function java(){setLanguage('java');setExtension('java');};//Download code file\nvar downloadTxtFile=function downloadTxtFile(){var element=document.createElement(\"a\");console.log(runcode);var file=new Blob([\"\".concat(runcode)],{type:\"text/plain\"});element.href=URL.createObjectURL(file);element.download=\"Code-Collab.\".concat(extension);document.body.appendChild(element);element.click();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"realtimeEditor\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-buttons\",children:[/*#__PURE__*/_jsx(Button,{className:\"all-btn\",style:{marginRight:'1rem',backgroundColor:'rgb(77, 103, 195)',border:'none'},onClick:downloadTxtFile,children:\"Save\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{className:\"all-btn\",style:{backgroundColor:'#4d67c3',border:'none',borderRadius:'7px'},id:\"dropdown-basic\",children:language}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:node,children:\"javascript\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:python,children:\"python\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:c,children:\"c\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:cpp,children:\"cpp\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:java,children:\"java\"})]})]}),/*#__PURE__*/_jsx(Button,{onClick:run,className:\"runbutton\",style:{backgroundColor:'rgb(231 11 56 / 78%)',border:'none'},children:\"Run\"})]}),/*#__PURE__*/_jsx(\"h5\",{style:{fontFamily:'\\'Baloo Bhaijaan 2\\' , cursive',color:'white',margin:'1rem'},children:\"OUTPUT\"}),/*#__PURE__*/_jsx(\"p\",{style:(_ref4={color:'white',fontFamily:'\\'Baloo Bhaijaan 2\\' , cursive'},_defineProperty(_ref4,\"color\",'white'),_defineProperty(_ref4,\"margin\",'4px'),_defineProperty(_ref4,\"fontWeight\",'200'),_defineProperty(_ref4,\"paddingLeft\",'1rem'),_ref4),children:result})]});};export default Editor;","map":{"version":3,"names":["React","useEffect","useRef","useState","Codemirror","ACTIONS","axios","Button","Dropdown","Editor","socketRef","roomId","onCodeChange","editorRef","runcode","setRuncode","result","setResult","language","setLanguage","extension","setExtension","run","post","then","data","init","current","fromTextArea","document","getElementById","mode","name","json","theme","autoCloseTags","autoCloseBrackets","lineNumbers","on","instance","changes","origin","code","getValue","emit","CODE_CHANGE","setValue","off","python","node","c","cpp","java","downloadTxtFile","element","createElement","console","log","file","Blob","type","href","URL","createObjectURL","download","body","appendChild","click","marginRight","backgroundColor","border","borderRadius","fontFamily","color","margin"],"sources":["/home/abhshk/Desktop/Code-Collab-main/code-collab/src/components/Editor.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport Codemirror from 'codemirror';\r\nimport 'codemirror/lib/codemirror.css';\r\nimport 'codemirror/theme/dracula.css';\r\nimport 'codemirror/mode/javascript/javascript.js';\r\nimport 'codemirror/addon/edit/closetag';\r\nimport 'codemirror/addon/edit/closebrackets';\r\nimport ACTIONS from '../Actions';\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/esm/Button';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\n\r\n\r\nconst Editor = ({ socketRef, roomId, onCodeChange }) => {\r\n    const editorRef = useRef(null);\r\n    const [runcode, setRuncode] = useState('');\r\n    const [result, setResult] = useState('');\r\n    const [language, setLanguage] = useState('python');\r\n    const [extension, setExtension] = useState('py')\r\n\r\n    //Compiling code\r\n    const run = () => {\r\n\r\n        axios\r\n            .post(`http://localhost:5000/${language}`, { runcode })\r\n            .then(\r\n                ({ data }) => {\r\n                    setResult(data);\r\n                }\r\n            );\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function init() {\r\n            editorRef.current = Codemirror.fromTextArea(\r\n                document.getElementById('realtimeEditor'),\r\n                {\r\n                    mode: { name: 'javascript', json: true },\r\n                    theme: 'dracula',\r\n                    autoCloseTags: true,\r\n                    autoCloseBrackets: true,\r\n                    lineNumbers: true,\r\n                }\r\n\r\n            );\r\n\r\n            editorRef.current.on('change', (instance, changes) => {\r\n                const { origin } = changes;\r\n                const code = instance.getValue();\r\n                onCodeChange(code);\r\n                setRuncode(code);\r\n\r\n                if (origin !== 'setValue') {\r\n                    socketRef.current.emit(ACTIONS.CODE_CHANGE, {\r\n                        roomId,\r\n                        code,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        init();\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        if (socketRef.current) {\r\n            socketRef.current.on(ACTIONS.CODE_CHANGE, ({ code }) => {\r\n                if (code !== null) {\r\n                    editorRef.current.setValue(code);\r\n                }\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            socketRef.current.off(ACTIONS.CODE_CHANGE);\r\n        };\r\n    }, [socketRef.current]);\r\n\r\n    //Settinf language and extension for various code languages\r\n    const python = () => {\r\n        setLanguage('python');\r\n        setExtension('py');\r\n    };\r\n    const node = () => {\r\n        setLanguage('node');\r\n        setExtension('js');\r\n    }\r\n    const c = () => {\r\n        setLanguage('c');\r\n        setExtension('c');\r\n    }\r\n    const cpp = () => {\r\n        setLanguage('cpp');\r\n        setExtension('cpp');\r\n    }\r\n    const java = () => {\r\n        setLanguage('java');\r\n        setExtension('java');\r\n    }\r\n\r\n    //Download code file\r\n    const downloadTxtFile = () => {\r\n        const element = document.createElement(\"a\");\r\n        console.log(runcode);\r\n        const file = new Blob([`${runcode}`], {\r\n            type: \"text/plain\"\r\n        });\r\n\r\n        element.href = URL.createObjectURL(file);\r\n        element.download = `Code-Collab.${extension}`;\r\n        document.body.appendChild(element);\r\n        element.click();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <textarea id=\"realtimeEditor\" ></textarea>\r\n            <div className='editor-buttons'>\r\n                <Button className='all-btn' style={{ marginRight: '1rem', backgroundColor: 'rgb(77, 103, 195)', border: 'none' }} onClick={downloadTxtFile}>Save</Button>\r\n                <Dropdown>\r\n                    <Dropdown.Toggle className='all-btn' style={{ backgroundColor: '#4d67c3', border: 'none', borderRadius: '7px' }} id=\"dropdown-basic\">\r\n                        {language}\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu>\r\n                        <Dropdown.Item onClick={node}>javascript</Dropdown.Item>\r\n                        <Dropdown.Item onClick={python}>python</Dropdown.Item>\r\n                        <Dropdown.Item onClick={c}>c</Dropdown.Item>\r\n                        <Dropdown.Item onClick={cpp}>cpp</Dropdown.Item>\r\n                        <Dropdown.Item onClick={java}>java</Dropdown.Item>\r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n                <Button onClick={run} className='runbutton' style={{ backgroundColor: 'rgb(231 11 56 / 78%)', border: 'none' }}>Run</Button>\r\n            </div>\r\n            <h5 style={{ fontFamily: '\\'Baloo Bhaijaan 2\\' , cursive', color: 'white', margin: '1rem' }}>OUTPUT</h5>\r\n            <p style={{ color: 'white', fontFamily: '\\'Baloo Bhaijaan 2\\' , cursive', color: 'white', margin: '4px', fontWeight: '200', paddingLeft: '1rem' }}>{result}</p>\r\n        </>\r\n    )\r\n\r\n};\r\n\r\nexport default Editor;"],"mappings":"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"},"metadata":{},"sourceType":"module"}