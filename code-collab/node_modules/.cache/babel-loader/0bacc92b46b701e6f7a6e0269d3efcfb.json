{"ast":null,"code":"var _jsxFileName = \"/home/abhshk/Desktop/Code-Collab-main/code-collab/src/components/Chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useState, useRef } from 'react';\nimport { initSocket } from '../socket.js';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Chat = () => {\n  _s();\n\n  const chatRef = useRef();\n  const [chat, setChat] = useState([]); //Getting name from local storage\n\n  const localData = JSON.parse(localStorage.getItem('name'));\n  const [state, setState] = useState({\n    name: localData,\n    message: \"\"\n  });\n  useEffect(() => {\n    const init = async () => {\n      chatRef.current = await initSocket();\n      chatRef.current.on(\"message\", _ref => {\n        let {\n          name,\n          message\n        } = _ref;\n        setChat([...chat, {\n          name,\n          message\n        }]);\n      });\n    };\n\n    init();\n    return () => chatRef.current.disconnect();\n  }, [chat]);\n\n  const onTextChange = e => {\n    setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const onMessageSubmit = e => {\n    const {\n      name,\n      message\n    } = state;\n    console.log(name);\n    chatRef.current.emit(\"message\", {\n      name,\n      message\n    });\n    e.preventDefault();\n    setState({\n      name,\n      message: \"\"\n    });\n  };\n\n  const renderChat = () => {\n    return chat.map((_ref2, index) => {\n      let {\n        name,\n        message\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-name\",\n          children: [name, \": \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-message\",\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 5\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 4\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"render-chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: 'white',\n          textAlign: 'center',\n          fontFamily: '\\'Baloo Bhaijaan 2\\' , cursive',\n          borderBottom: '1px solid white',\n          margin: '1rem'\n        },\n        children: \"Chat Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), renderChat()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"textbox-message\",\n      children: /*#__PURE__*/_jsxDEV(InputGroup, {\n        style: {\n          width: '100%'\n        },\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          name: \"message\",\n          type: \"text\",\n          onChange: e => onTextChange(e),\n          value: state.message,\n          label: \"Message\",\n          placeholder: \"Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: onMessageSubmit,\n          style: {\n            boxShadow: 'none',\n            backgroundColor: '#4d67c3',\n            border: 'none'\n          },\n          id: \"button-addon2\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Chat, \"Y9+CrpW4solUqZ3A9Ar83iXOw4k=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","initSocket","Button","Form","InputGroup","Chat","chatRef","chat","setChat","localData","JSON","parse","localStorage","getItem","state","setState","name","message","init","current","on","disconnect","onTextChange","e","target","value","onMessageSubmit","console","log","emit","preventDefault","renderChat","map","index","color","textAlign","fontFamily","borderBottom","margin","width","boxShadow","backgroundColor","border"],"sources":["/home/abhshk/Desktop/Code-Collab-main/code-collab/src/components/Chat.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useState, useRef } from 'react';\r\nimport { initSocket } from '../socket.js';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\n\r\nconst Chat = () => {\r\n\tconst chatRef = useRef()\r\n\r\n\tconst [chat, setChat] = useState([])\r\n\r\n\t//Getting name from local storage\r\n\tconst localData = JSON.parse(localStorage.getItem('name'));\r\n\tconst [state, setState] = useState({ name: localData, message: \"\" })\r\n\r\n\tuseEffect(() => {\r\n\t\tconst init = async () => {\r\n\t\t\tchatRef.current = await initSocket();\r\n\t\t\tchatRef.current.on(\"message\", ({ name, message }) => {\r\n\t\t\t\tsetChat([...chat, { name, message }])\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t\tinit()\r\n\t\treturn () => chatRef.current.disconnect();\r\n\r\n\t}, [chat])\r\n\tconst onTextChange = (e) => {\r\n\t\tsetState({ ...state, [e.target.name]: e.target.value })\r\n\t}\r\n\tconst onMessageSubmit = (e) => {\r\n\r\n\t\tconst { name, message } = state;\r\n\t\tconsole.log(name)\r\n\t\tchatRef.current.emit(\"message\", { name, message })\r\n\t\te.preventDefault()\r\n\t\tsetState({ name, message: \"\" })\r\n\r\n\t}\r\n\r\n\tconst renderChat = () => {\r\n\t\treturn chat.map(({ name, message }, index) => (\r\n\t\t\t<div key={index}>\r\n\t\t\t\t<h3 className='text-name'>\r\n\t\t\t\t\t{name}: <span className='text-message'>{message}</span>\r\n\t\t\t\t</h3>\r\n\t\t\t</div>\r\n\t\t))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"render-chat\">\r\n\t\t\t\t<h3 style={{ color: 'white', textAlign: 'center', fontFamily: '\\'Baloo Bhaijaan 2\\' , cursive', borderBottom: '1px solid white', margin: '1rem' }}>Chat Log</h3>\r\n\t\t\t\t{renderChat()}\r\n\t\t\t</div>\r\n\t\t\t<div className='textbox-message'>\r\n\r\n\t\t\t\t<InputGroup style={{ width: '100%' }} className=\"mb-3\">\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tonChange={(e) => onTextChange(e)}\r\n\t\t\t\t\t\tvalue={state.message}\r\n\t\t\t\t\t\tlabel=\"Message\"\r\n\t\t\t\t\t\tplaceholder=\"Message\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button onClick={onMessageSubmit} style={{ boxShadow: 'none', backgroundColor: '#4d67c3', border: 'none' }} id=\"button-addon2\">\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</InputGroup>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}