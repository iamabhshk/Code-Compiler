{"ast":null,"code":"import _defineProperty from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/abhshk/Desktop/Code-Collab-main/code-collab/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useState,useRef}from'react';import{initSocket}from'../socket.js';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import InputGroup from'react-bootstrap/InputGroup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Chat=function Chat(){var chatRef=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chat=_useState2[0],setChat=_useState2[1];//Getting name from local storage\nvar localData=JSON.parse(localStorage.getItem('name'));var _useState3=useState({name:localData,message:\"\"}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];useEffect(function(){var init=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return initSocket();case 2:chatRef.current=_context.sent;chatRef.current.on(\"message\",function(_ref2){var name=_ref2.name,message=_ref2.message;setChat([].concat(_toConsumableArray(chat),[{name:name,message:message}]));});case 4:case\"end\":return _context.stop();}}},_callee);}));return function init(){return _ref.apply(this,arguments);};}();init();return function(){return chatRef.current.disconnect();};},[chat]);var onTextChange=function onTextChange(e){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},e.target.name,e.target.value)));};var onMessageSubmit=function onMessageSubmit(e){var name=state.name,message=state.message;console.log(name);chatRef.current.emit(\"message\",{name:name,message:message});e.preventDefault();setState({name:name,message:\"\"});};var renderChat=function renderChat(){return chat.map(function(_ref3,index){var name=_ref3.name,message=_ref3.message;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-name\",children:[name,\": \",/*#__PURE__*/_jsx(\"span\",{className:\"text-message\",children:message})]})},index);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"render-chat\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'white',textAlign:'center',fontFamily:'\\'Baloo Bhaijaan 2\\' , cursive',borderBottom:'1px solid white',margin:'1rem'},children:\"Chat Log\"}),renderChat()]}),/*#__PURE__*/_jsx(\"div\",{className:\"textbox-message\",children:/*#__PURE__*/_jsxs(InputGroup,{style:{width:'100%'},className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Control,{name:\"message\",type:\"text\",onChange:function onChange(e){return onTextChange(e);},value:state.message,label:\"Message\",placeholder:\"Message\"}),/*#__PURE__*/_jsx(Button,{onClick:onMessageSubmit,style:{boxShadow:'none',backgroundColor:'#4d67c3',border:'none'},id:\"button-addon2\",children:\"Send\"})]})})]});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","useRef","initSocket","Button","Form","InputGroup","Chat","chatRef","chat","setChat","localData","JSON","parse","localStorage","getItem","name","message","state","setState","init","current","on","disconnect","onTextChange","e","target","value","onMessageSubmit","console","log","emit","preventDefault","renderChat","map","index","color","textAlign","fontFamily","borderBottom","margin","width","boxShadow","backgroundColor","border"],"sources":["/home/abhshk/Desktop/Code-Collab-main/code-collab/src/components/Chat.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useState, useRef } from 'react';\r\nimport { initSocket } from '../socket.js';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\n\r\nconst Chat = () => {\r\n\tconst chatRef = useRef()\r\n\r\n\tconst [chat, setChat] = useState([])\r\n\r\n\t//Getting name from local storage\r\n\tconst localData = JSON.parse(localStorage.getItem('name'));\r\n\tconst [state, setState] = useState({ name: localData, message: \"\" })\r\n\r\n\tuseEffect(() => {\r\n\t\tconst init = async () => {\r\n\t\t\tchatRef.current = await initSocket();\r\n\t\t\tchatRef.current.on(\"message\", ({ name, message }) => {\r\n\t\t\t\tsetChat([...chat, { name, message }])\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t\tinit()\r\n\t\treturn () => chatRef.current.disconnect();\r\n\r\n\t}, [chat])\r\n\tconst onTextChange = (e) => {\r\n\t\tsetState({ ...state, [e.target.name]: e.target.value })\r\n\t}\r\n\tconst onMessageSubmit = (e) => {\r\n\r\n\t\tconst { name, message } = state;\r\n\t\tconsole.log(name)\r\n\t\tchatRef.current.emit(\"message\", { name, message })\r\n\t\te.preventDefault()\r\n\t\tsetState({ name, message: \"\" })\r\n\r\n\t}\r\n\r\n\tconst renderChat = () => {\r\n\t\treturn chat.map(({ name, message }, index) => (\r\n\t\t\t<div key={index}>\r\n\t\t\t\t<h3 className='text-name'>\r\n\t\t\t\t\t{name}: <span className='text-message'>{message}</span>\r\n\t\t\t\t</h3>\r\n\t\t\t</div>\r\n\t\t))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"render-chat\">\r\n\t\t\t\t<h3 style={{ color: 'white', textAlign: 'center', fontFamily: '\\'Baloo Bhaijaan 2\\' , cursive', borderBottom: '1px solid white', margin: '1rem' }}>Chat Log</h3>\r\n\t\t\t\t{renderChat()}\r\n\t\t\t</div>\r\n\t\t\t<div className='textbox-message'>\r\n\r\n\t\t\t\t<InputGroup style={{ width: '100%' }} className=\"mb-3\">\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tonChange={(e) => onTextChange(e)}\r\n\t\t\t\t\t\tvalue={state.message}\r\n\t\t\t\t\t\tlabel=\"Message\"\r\n\t\t\t\t\t\tplaceholder=\"Message\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button onClick={onMessageSubmit} style={{ boxShadow: 'none', backgroundColor: '#4d67c3', border: 'none' }} id=\"button-addon2\">\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</InputGroup>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}